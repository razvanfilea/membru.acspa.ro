<div hx-swap="outerHTML" hx-target="this">
    <div class="flex flex-row justify-between items-center mt-8">
        <h2 class="text-2xl font-bold">Rezervările tale:</h2>

        <button hx-post="/profile/reservations?show_cancelled={{ show_cancelled }}" hx-trigger="mousedown"
                class="btn btn-circle" title="Refresh">
            <span class="material-symbols-outlined">refresh</span>
        </button>
    </div>

    <label hx-post="/profile/reservations?show_cancelled={{ !show_cancelled }}" hx-trigger="mousedown"
           class="label cursor-pointer justify-start gap-8">
        <span class="label-text">Afișează anulate</span>
        <input type="checkbox" class="checkbox checkbox-primary" autocomplete="off"
               {% if show_cancelled %} checked="checked" {% endif %}/>
    </label>

    <div id="reservations" class="mt-4 flex flex-col gap-4">
        {% if reservations.is_empty() %}
        <p>Nu ai nici o rezervare</p>
        {% endif %}

        {% for reservation in reservations %}
        <div id="res_{{ loop.index }}" class="flex flex-row gap-4 justify-between items-center p-4 bg-gray-600 rounded">
            <div class="flex flex-col gap-1">
                <p>Pe data de <b>{{ reservation.date.format(date_formats::READABLE_DATE).unwrap() }}</b>
                    de la ora <b>{{ reservation.hour }}:00</b>
                </p>
                {% if reservation.as_guest %}
                <p class="text-blue-300">Ca invitat</p>
                {% endif %}
                {% if reservation.in_waiting %}
                <p class="text-pink-600">În așteptare</p>
                {% endif %}
                <p class="text-sm">Creat pe: {{ reservation.created_at.format(date_formats::READABLE_DATE_TIME).unwrap()}}</p>
            </div>

            {% if reservation.is_cancellable() %}
            <button
                    class="btn btn-outline btn-warning"
                    hx-target="#res_{{ loop.index }}"
                    hx-vals='{"date": "{{ reservation.date.format(date_formats::ISO_DATE).unwrap() }}", "hour": {{ reservation.hour }} }'
                    hx-delete="/reservation">Anulează
            </button>
            {% endif %}
        </div>
        {% endfor %}
    </div>

</div>