<main class="grid grid-cols-1 md:grid-cols-2 gap-4">
    <div class="flex flex-col max-w-96 grow" hx-target="main" hx-swap="outerHTML">
        <span class="mb-4">
            <b>Data selectatÄƒ: </b>
            <span class="text-blue-400">{{ selected_date.format("%d.%m.%Y") }}</span>
        </span>
        {% include "components/calendar_date_picker.html" %}
    </div>

    <div class="flex flex-col max-w-full grow" hx-vals='{"selected_date": "{{ selected_date.format("%d.%m.%Y") }}" }'>
        <span>Alege ora:</span>

        {% for possible_hour in reservation_hours %}
        <div hx-vals='{"hour": {{ possible_hour.start_hour }} }'>
            <div class="flex flex-row flex-wrap gap-2 mb-4 items-center">
                Ora {{ possible_hour.start_hour }} - {{ possible_hour.end_hour }}:
                {% if let Ok(reservations) = possible_hour.reservations %}
                {% for res in reservations %}
                <button class="btn btn-sm rounded-full text-white items-center
                    {% match res.res_type %}
                    {% when ReservationType::Normal %}
                    bg-slate-600
                    {% when ReservationType::SpecialGuest %}
                    bg-fuchsia-600
                    {% when ReservationType::Guest %}
                    bg-cyan-500
                    {% endmatch %}">
                    {{ loop.index }}. {{ res.name }}
                    {% if res.has_key %}
                    <span class="material-symbols-outlined">vpn_key</span>
                    {% endif %}
                </button>
                {% endfor %}
                {% endif %}

                {% if let Err(restriction) = possible_hour.reservations %}
                    <span class="text-red-600 font-semibold">{{ restriction }}</span>
                {% endif %}
            </div>

            {% if possible_hour.reservations.is_ok() %}
            <input name="reservation" type="radio" aria-label="Rezervare" autocomplete="off"
                   hx-post="/choose_hour" hx-target="#confirmation" hx-swap="outerHTML scroll:bottom"
                   class="btn btn-md btn-outline btn-primary w-min"/>
            {% endif %}

            {% if !loop.last %}
            <div class="divider"></div>
            {% endif %}
        </div>
        {% endfor %}

        <div id="confirmation"></div>

    </div>
</main>
