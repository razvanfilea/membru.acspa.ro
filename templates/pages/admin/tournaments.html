{% extends "../base.html" %}

{% block page_title %}Zile cu turneu{% endblock %}

{% block content %}

<main class="p-4 md:p-8 w-full">
    <div class="flex flex-row justify-end items-center mb-8">
        <button class="btn btn-circle btn-success" onclick="showModalCleared()">
            <span class="material-symbols-outlined">add</span>
        </button>
    </div>

    {% include "components/admin/tournaments_content.html" %}
</main>

<dialog id="add_modal" class="modal">
    <div class="modal-box">
        <form class="form-control">
            <h3 class="text-lg font-bold mb-4">Adaugă turneu</h3>

            <div class="label">
                <label for="date" class="label-text">Data:</label>
            </div>
            <input id="date" name="date" type="date" class="input input-bordered w-full" required
                   min='{{ current_date.format(date_formats::ISO_DATE).unwrap() }}'/>

            <div class="label">
                <label for="description" class="label-text">Descriere:</label>
            </div>
            <input id="description" name="description" type="text" class="input input-bordered w-full"
                   placeholder="Descriere (nu trebuie specificat)"/>

            <div class="label">
                <label for="start_hour" class="label-text">Ora de început:</label>
            </div>
            <input id="start_hour" name="start_hour" type="number" min="1" max="22" class="input input-bordered w-full"
                   placeholder="Ora la care începe turneul" required/>

            <div class="label">
                <label for="duration" class="label-text">Durata:</label>
            </div>
            <input id="duration" name="duration" type="number" min="1" max="5" class="input input-bordered w-full"
                   placeholder="Durata turneului în ore" required/>

            <div class="label">
                <label for="capacity" class="label-text">Capacitate:</label>
            </div>
            <input id="capacity" name="capacity" type="number" min="1" max="20" class="input input-bordered w-full"
                   placeholder="Capacitate (nu trebuie specificat)"/>

            <div class="modal-action grid grid-cols-2">
                <button class="btn"
                        onclick="add_modal.close()">
                    Anulează
                </button>

                <button class="btn btn-success"
                        onclick="add_modal.close()"
                        hx-put="/admin/tournaments"
                        hx-swap="none">
                    Adaugă
                </button>
            </div>
        </form>
    </div>
    <form method="dialog" class="modal-backdrop">
        <button>close</button>
    </form>
</dialog>

<script>
    function copyDateModal(isoDate, description) {
        document.getElementById("date").value = isoDate;
        document.getElementById("description").value = description;
        add_modal.showModal()
    }

    function showModalCleared() {
        document.getElementById("date").value = '';
        document.getElementById("description").value = '';
        add_modal.showModal();
    }
</script>

{% endblock %}
