{% if tournaments.is_empty() %}
<div class="flex flex-col items-center justify-center py-20 opacity-60">
    <span class="material-symbols-outlined text-6xl mb-4">event_busy</span>
    <p class="text-xl font-semibold">Nu există turnee programate</p>
</div>
{% else %}
<div id="list" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-3 md:gap-6 pb-24">
    {% for tournament in tournaments %}
    {% let iso_date = tournament.date.to_string() %}

    <div id="tournament_{{ iso_date }}" class="card bg-neutral text-neutral-content shadow-xl border border-white/5">
        <div class="card-body p-6">
            <div class="flex justify-between items-start mb-2">
                <div class="flex flex-col">
                    <span class="text-xs uppercase tracking-wider opacity-60 font-bold">Data Turneu</span>
                    <h2 class="text-2xl font-black text-primary">
                        {{ tournament.date.format(date_formats::READABLE_DATE).unwrap() }}
                    </h2>
                </div>
                {% if let Some(capacity) = tournament.slot_capacity %}
                <div class="badge badge-secondary badge-outline font-bold">
                    {{ capacity }} Locuri
                </div>
                {% endif %}
            </div>

            {% if !tournament.description.is_empty() %}
            <p class="italic opacity-80 mb-4 line-clamp-2 leading-tight">
                "{{ tournament.description }}"
            </p>
            {% else %}
            <div class="h-6"></div>
            {% endif %}

            <div class="space-y-2 text-sm grow">
                <div class="flex items-center gap-2">
                    <span class="material-symbols-outlined text-primary text-base">schedule</span>
                    <span>Începe la ora: <b>{{ tournament.start_hour }}:{{ format!("{:02}", tournament.start_minute.unwrap_or_default()) }}</b></span>
                </div>
                <div class="flex items-center gap-2">
                    <span class="material-symbols-outlined text-primary text-base">timer</span>
                    <span>Durată: <b>{{ tournament.duration }} ore</b></span>
                </div>
            </div>

            <div class="flex items-center justify-between items-end">
                    <span class="text-[10px] uppercase opacity-40">
                        Creat: {{ tournament.created_at.format(date_formats::READABLE_DATE).unwrap() }}
                    </span>

                {% if tournament.date >= current_date %}
                <div class="flex gap-2">
                    <a href="/admin/tournaments/edit/{{ iso_date }}"
                       class="btn btn-circle btn-sm btn-ghost hover:btn-info"
                       title="Editează">
                        <span class="material-symbols-outlined scale-90">edit</span>
                    </a>

                    <button class="btn btn-circle btn-sm btn-ghost btn-error"
                            title="Șterge"
                            hx-confirm="Ești sigur ca vrei să ștergi acest turneu? Această acțiune va șterge și toate rezervările din acea zi."
                            hx-delete='/admin/tournaments/{{ iso_date }}'
                            hx-target="#tournament_{{ iso_date }}"
                            hx-swap="outerHTML">
                        <span class="material-symbols-outlined scale-90">delete</span>
                    </button>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% endif %}